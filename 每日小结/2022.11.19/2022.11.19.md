# 总结

今天做了ccpc绵阳的热身赛，最后一题实现上差了一点，悲。

还把昨天VP的D，J两题研究了下做法并实现了。

# 部分题解

## 2022CCPC广州D [Digits](https://codeforces.com/gym/104053/problem/D)

### 题意

给出一个大小为$n$的数组$a$，问把$a$分成若干连续段，每个连续段的和转换成字符串后按顺序拼接后是回文串的方案数。

$n \le 150$

$a_i \le 666666$ 

### 题解

容易想到区间dp，设$f_{l,r,0/1,s}$表示做到区间$[l,r]$，内部消完后还剩下的字符串为$s$，位于左/右的方案数。直接递归跑dp复杂度大概是$O(n^4log^2_{}m)$，$m$是值域，但是显然状态数卡不满$n^3logm$，所以可以直接ac。也可以再加一些优化，能将速度提高10倍左右。

## 2022CCPC广州J [Math Exam](https://codeforces.com/gym/104053/problem/J)

### 题意

$a_1=1$，$a_{i+1}=a_i+2$或$a_{i+1}=-a_i$。

给出$n$，$m$，求长度为$n$且$|a_i| \le m$的$a$的数量。

$n \le 10^7$

$m \le 2 \cdot n$ 且$m$为奇数

### 题解

令$a_0=-1$，$b_i= \frac {|a_i+1|}{2}$。

那么$b_0=0$，$b_i=b_{i-1}+1$或$b_i=b_{i-1}-1$，$b$与$a$一一对应。

问题转化为经典的折线模型，增大向右走一步，减小向上走一步。求从$(0,0)$出发走$n$步，每次向右或向上走一步，且不碰到直线$y=x+1$和$y=x-\frac{(m+1)}{2}-1$的方案数。

考虑容斥，若路线依次碰到了若干次这两条线，那么把终点对于这两条线按碰到的倒序做轴对称，最终得到的点在$x+y=n$这条直线的$0 \le x \le n$部分，每对称一次容斥系数都要乘$-1$。考虑枚举对称后的点，可以直接计算出容斥系数，计算答案。